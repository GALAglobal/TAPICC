<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article [
<!ENTITY % dbgenent SYSTEM "dbgenent.mod">
%dbgenent;
]>
<article version="5.1" xml:lang="en-US" xmlns="http://docbook.org/ns/docbook"
  xmlns:xl="http://www.w3.org/1999/xlink">
  <info>
    <title>XLIFF 2 Extraction and Merging Best Practice, Version &version;</title>
    <authorgroup>

      <!-- Editors appear in alphabetical order unless there is a lead editor among a group of editors -->
      <editor>
        <personname>David Filip</personname>
        <email>david.filip@adaptcentre.ie</email>
        <affiliation>
          <orgname>ADAPT Centre</orgname>
        </affiliation>
      </editor>

      <editor>
        <personname>Ján Husarčík</personname>
        <email>jhusarcik@moravia.com</email>
        <affiliation>
          <orgname>Moravia</orgname>
        </affiliation>
      </editor>

      <!-- WG Chairs should be given credit -->
      <othercredit role="chair">
        <personname>Rodolfo M. Raya</personname>
      </othercredit>
      <othercredit role="chair">
        <personname>Andreas Galambos</personname>
      </othercredit>
    </authorgroup>

    <keywordset>
      <keyword>XLIFF</keyword>
      <keyword>Extraction</keyword>
      <keyword>Merging</keyword>
      <keyword>Best Practice</keyword>
    </keywordset>

    <releaseinfo role="this-location-authoritative" />
    <releaseinfo role="this-location-pdf" />

    <releaseinfo role="previous-location-authoritative" />
    <releaseinfo role="previous-location-pdf" />

    <releaseinfo role="latest-location-authoritative" />
    <releaseinfo role="latest-location-pdf" />

    <releaseinfo role="committee">TAPICC T1/WG3</releaseinfo>
    <pubdate>&pubdate;</pubdate>
    <copyright>
      <year>&pubyear;</year>
      <holder>GALA TAPICC. All rights reserved.</holder>
    </copyright>
    <legalnotice role="additional">
      <title>Additional artifacts</title>
      <para>This prose specification is one component of a Work Product that also includes:</para>
      <itemizedlist>
        <listitem>
          <para>Extraction and merging examples from
            https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples</para>
        </listitem>
      </itemizedlist>
    </legalnotice>

    <legalnotice role="related">
      <title>Related work</title>
      <para>This note provides informative best practice for XLIFF 2 Specifications:</para>
      <itemizedlist>
        <listitem>
          <para>XLIFF Version 2.1 <citation>[XLIFF-2.1]</citation></para>
        </listitem>
        <listitem>
          <para>XLIFF Version 2.0 <citation>[XLIFF-2.0]</citation></para>
        </listitem>
        <listitem>
          <para>ISO 21720:2017 <citation>[ISO XLIFF]</citation></para>
        </listitem>
      </itemizedlist>
    </legalnotice>

    <abstract>
      <para>This &releaseinfo; specification targets designers of XLIFF <firstterm />Extracting and
        Merging Tools for content owners. It gathers common problems that are prone to appear when
          <firstterm>Extracting</firstterm>
        <firstterm>XLIFF Documents</firstterm> from HTML, generic XML, or MarkDown. This
        specification shows why some <firstterm>Extraction</firstterm> approaches will cause issues
        during an <firstterm>XLIFF Roundtrip</firstterm>. This best practice guidance provides
        better thought through alternatives and shows how to use many of advanced XLIFF features for
        lossless Localization roundtrip of HTML and XML based content.</para>

    </abstract>
    <legalnotice role="status">
      <title>Status</title>
      <para>This &releaseinfo; was last revised by TAPICC &track;/&wg; or the TAPICC Steering
        Committee on the above date. The level of approval is also listed above. Check the “Latest
        version” location noted above for possible later revisions of this document.</para>
      <para>Contributions to this deliverable or subsequent versions of this deliverable can be made
        via the <link xl:href="https://github.com/GALAglobal/TAPICC">GALA TAPICC GitHub
          Repository</link> subject to signing the <link
          xl:href="https://www.gala-global.org/tapicc-legal-agreement">TAPICC Legal
        Agreement</link>.</para>
    </legalnotice>
    <legalnotice role="citation">
      <title>Citation format</title>
      <para>When referencing this specification the following citation format should be used:</para>
      <para><citation>XLIFF-EM-BP</citation></para>
      <para><emphasis>XLIFF 2 Extraction and Merging Best Practice, Version &version;</emphasis>
        Edited by David Filip and Ján Husarčík. &pubdate;. &stage; &substage;. &this-loc;.html.
        Latest version: &latest;.html.</para>
    </legalnotice>
    <legalnotice role="notices">
      <title>Notices</title>
      <para>Copyright © GALA TAPICC &pubyear;. All rights reserved.</para>
      <para> The Translation API Class and Cases (TAPICC) initiative is a collaborative,
        community-driven, open-source project to advance API standards in the localization industry.
        The overall purpose of this project is to provide a metadata and API framework on which
        users can base their integration, automation and interoperability efforts.</para>

      <para>The usage of all deliverables of this initiative - including this specification - is
        subject to open source license terms expressed in the BSD-3-Clause License and CC-BY 2.0
        License, the declared applicable licenses when the project was chartered. <itemizedlist>
          <listitem>
            <para>The 3-Clause BSD License (BSD-3 Clause): <link
                xl:href="https://opensource.org/licenses/BSD-3-Clause"
                >https://opensource.org/licenses/BSD-3-Clause</link></para>
          </listitem>
          <listitem>
            <para>Creative Commons Legal Code (CC-BY 2.0): <link
                xl:href="https://creativecommons.org/licenses/by/2.0/legalcode"
                >https://creativecommons.org/licenses/by/2.0/legalcode</link></para>
          </listitem>
        </itemizedlist></para>
    </legalnotice>
  </info>

  <!-- Terms and concepts defined in this section need to be highlighted thorough the specification using the firstterm element -->
  <glossary xml:id="Glossary">
    <title>Terminology and Concepts</title>
    <glossentry>
      <glossterm>Context hints</glossterm>
      <glossdef>
        <para>XLIFF attributes on structural or inline elements providing additional contexts, such
          as <code><link
              xlink:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#disp"
              xmlns:xlink="http://www.w3.org/1999/xlink">disp</link></code> or <code><link
              xlink:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#equiv"
              xmlns:xlink="http://www.w3.org/1999/xlink">equiv</link></code>.</para>
      </glossdef>
    </glossentry>
    <glossentry>
      <glossterm>Inline codes</glossterm>
      <glossdef>
        <para />
      </glossdef>
    </glossentry>
    <glossentry>
      <glossterm>marker</glossterm>
      <glossdef>
        <para />
      </glossdef>
    </glossentry>
  </glossary>
  <section xml:id="Intro">
    <title>Introduction</title>
    <para>This specification targets designers of XLIFF Extracting and Merging Tools for content
      owners. XLIFF Roundtrip designers of all kinds will benefit, no matter if they design their
      XLIFF Extractor/Merger for corporate or blog use.</para>
    <para>Extraction and merging behavior is out of the normative scope of OASIS XLIFF
      Specifications. Although those specifications do provide some guidance for Extractor and
      Merger Agents, XLIFF TC did not attempt to prescribe how exactly to use XLIFF to represent
      native content. This is mostly because XLIFF is a native format agnostic Localization
      interchange Format.</para>
    <para>This &releaseinfo; targets designers of XLIFF <firstterm>Extracting</firstterm> and
        <firstterm>Merging</firstterm> Tools for content owners. <firstterm>XLIFF
        Roundtrip</firstterm> designers of all kinds will benefit, no matter if they design their
        <firstterm>XLIFF Extractor/Merger</firstterm> for corporate or blog use.</para>
    <para><firstterm>Extraction</firstterm> and <firstterm>Merging</firstterm> behavior is out of
      the normative scope of OASIS XLIFF Specifications. Although those specifications do provide
      some guidance for <firstterm>Extractor</firstterm> and <firstterm>Merger Agents</firstterm>,
      XLIFF TC did not attempt to prescribe how exactly to use XLIFF to represent native content.
      This is mostly because XLIFF is a native format agnostic Localization Interchange
      Format.</para>
    <para>This specification gathers common problems that are prone to appear when Extracting XLIFF
      Documents from HTML, generic XML, or MarkDown. This specification shows why some
        <firstterm>Extraction</firstterm> approaches will cause issues during an <firstterm>XLIFF
        Roundtrip</firstterm>, issues often so severe that <firstterm>Merging</firstterm> back of
      target content will not be possible without costly postprocessing or could fail utterly. This
      best practice guidance provides better thought through alternatives and shows how to use many
      of advanced XLIFF features for lossless Localization roundtrip of HTML and XML based content.
      Most of the times there are no ultimate prescribed solutions, rather possible design goals are
      described and best methods how to achieve them proposed.</para>

  </section>


  <section xml:id="Spec">
    <title>Specification</title>
    <para />

    <section>
      <title>Inline Codes</title>
      <para />
      <section>
        <title>Representing Spanning Codes</title>
        <para>Spanning codes in the original format are created by opening code, content and closing
          code. In HTML that can be <code>&lt;bold>text&lt;/bold></code>, in RTF <code>\b text
            \b0</code>.</para>
        <para>In XLIFF2 such code can be represented using <code><link
              xlink:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#sc"
              xmlns:xlink="http://www.w3.org/1999/xlink">&lt;sc /></link></code>/<code><link
              xlink:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#ec"
              xmlns:xlink="http://www.w3.org/1999/xlink">&lt;ec /></link></code> pair universally,
          or by <code><link
              xlink:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#pc"
              xmlns:xlink="http://www.w3.org/1999/xlink">&lt;pc>&lt;/pc></link></code> in case of
          well formed spanning code.</para>
        <para>Ideally the original format is documented enough to instruct Extractor about role of
          each inline code. For example XML schema allows to declare elements using keyword EMPTY.
          This way all elements, which are not declared EMPTY, can be represented as described
          above. To further help the extraction process the following recommendation could be
          implemented in original XML format: <quote>For interoperability, the empty-element tag
            SHOULD be used, and SHOULD only be used, for elements which are declared
            EMPTY.</quote><citation>[XML]</citation></para>
        <para>This concept is illustrated by <link
            xlink:href="https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/spanning_as_ph"
            xmlns:xlink="http://www.w3.org/1999/xlink"><code>spanning_as_ph</code></link></para>
        <para>•[spanning_as_ph]
          https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/spanning_as_ph
          •Extractor could use knowledge of schema and only use does not use &lt;ph> for codes that
          are declared as EMPTY. To further help the extraction process, following W3C
          recommendation could be followed: „The empty-element tag <emphasis role="italic"
            >SHOULD</emphasis> be used, and <emphasis role="italic">SHOULD</emphasis> only be used,
          for elements which are declared EMPTY.“ (https://www.w3.org/TR/REC-xml/#sec-starttags),
          e.g. even &lt;span> without content would use &lt;span>&lt;/span> as compared to &lt;br
          />. •https://issues.oasis-open.org/browse/XLIFF-14
          http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#ph</para>
      </section>
      <section>
        <title>Outermost Tag Pairs</title>
        <para> •[outermost_inline_excluded]
          https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/outermost_inline_excluded
          •Both functional and formatting inline codes provide additional context for translator and
          could be linguistically significant. •If they are important enough to be in native format,
          they should be present in extracted content. </para>
      </section>
      <section>
        <title> Incomplete Extraction of Inline Codes</title>
        <para> •[CDATA] https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/cdata
          •[inline_codes_plain_text]
          https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/inline_codes_plain_text
          •http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html#d0e8112
          •https://www.w3.org/TR/xml-i18n-bp/#AuthCDATA •Not using native XLIFF representation
          leaves inline codes unprotected and increases risk of roundtrip corrupting them. </para>
      </section>
      <section>
        <title> Representing Multiple Subsequent Codes</title>
        <para> •[multiple_codes_represented_as_single]
          https://github.com/GALAglobal/TAPICC/tree/master/extraction_examples/multiple_codes_represented_as_single
          •Grouping several independent inline codes into single representation could prove
          challenging with negative impact on •Translation quality •Fluency •Functionality
          •Automated actions •Validation •Some codes needs to be removed, copied, added or
          reordered. •If any of the above actions is to be prevented, it can be controlled using
          editing hints with finer granularity. </para>
      </section>
    </section>
    <section>
      <title>Target Content in Extracted XLIFF</title>
      <para />

      <section>
        <title>Inserting unmodified source content into <code>&lt;target></code></title>
        <para />
      </section>
      <section>
        <title> Inserting possible translation into <code>&lt;target></code></title>
        <para />
      </section>
      <section>
        <title> State Machine</title>
        <para />
      </section>
    </section>
    <section>
      <title>Editing and Context Hints</title>
      <para />
      <section>
        <title>Non-deletable Inline Codes</title>
        <para />
      </section>
      <section>
        <title> Preserving Order of Codes</title>
        <para />
      </section>
      <section>
        <title> Controlling Segmentation</title>
        <para />
      </section>
      <section>
        <title>Providing Context</title>
        <para><glossterm>Context hints</glossterm></para>
      </section>
      <section>
        <title>Considerations for Using Spanning Codes</title>
        <para />
      </section>
    </section>
    <section>
      <title>XLIFF Structure</title>
      <para />
      <section>
        <title>File Structure</title>
        <para />
      </section>
      <section>
        <title>Role of &lt;unit></title>
        <para />
      </section>
    </section>
    <section>
      <title>Miscellaneous</title>
      <para />
      <section>
        <title>Value of attribute <code>id</code></title>
        <para />
      </section>
      <section>
        <title>Whitespace Handling</title>
        <para />
      </section>
      <section>
        <title>Protecting Non-localizable Content</title>
        <para />
      </section>
      <section>
        <title>Merging Translated Content</title>
        <para />
      </section>
      <section>
        <title>Selecting Language Tags</title>
        <para />
      </section>
      <section>
        <title>Validation of Extracted Content</title>
        <para />
      </section>
    </section>
    <section>
      <title>XLIFF Validations</title>
      <para />
    </section>
  </section>

  <section xml:id="Summary">
    <title>Summary</title>
    <para />
  </section>

  <bibliography xml:id="references">
    <title>References</title>
    <bibliodiv>
      <title>Normative references</title>
      <bibliomixed><abbrev>XML</abbrev>W3C: <title>Extensible Markup Language (XML)
          1.0</title><date>26 November 2008</date><bibliomisc><link
            xlink:href="https://www.w3.org/TR/xml/" xmlns:xlink="http://www.w3.org/1999/xlink"
           /></bibliomisc></bibliomixed>
      <bibliomixed>
        <abbrev>XLIFF-2.1</abbrev>Edited by David Filip, Tom Comerford, Soroush Saadatfar, Felix
        Sasaki, and Yves Savourel: <title>XLIFF Version 2.1</title><date>12 October 2017</date>
        <bibliomisc><link version="Candidate OASIS Standard 01"
            xl:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/cos01/xliff-core-v2.1-cos01.html"
             /><link version="latest"
            xl:href="http://docs.oasis-open.org/xliff/xliff-core/v2.1/xliff-core-v2.1.html"
           /></bibliomisc>
      </bibliomixed>
      <bibliomixed>
        <abbrev>XLIFF-2.0</abbrev>Edited by Tom Comerford, David Filip, Rodolfo M. Raya, and Yves
        Savourel: <title>XLIFF Version 2.0</title><date>04 August 2014</date>
        <bibliomisc><link version="OASIS Standard"
            xl:href="http://docs.oasis-open.org/xliff/xliff-core/v2.0/os/xliff-core-v2.0-os.html"
             /><link version="latest"
            xl:href="http://docs.oasis-open.org/xliff/xliff-core/v2.0/xliff-core-v2.0.html"
           /></bibliomisc>
      </bibliomixed>
      <bibliomixed>
        <abbrev>ISO XLIFF</abbrev> Edited by Tom Comerford, David Filip, Rodolfo M. Raya, and Yves
        Savourel: <title>ISO 21720:2017 - XLIFF (XML Localisation interchange file
          format)</title><date>November 2017</date>
        <bibliomisc><link version="International Standard"
            xl:href="https://www.iso.org/standard/71490.html" /></bibliomisc>
      </bibliomixed>
    </bibliodiv>
    <bibliodiv>
      <title>Non-Normative References</title>
      <bibliomixed><abbrev><!--XML--></abbrev><!--W3C: --><title><!--Extensible Markup Language (XML) 1.0--></title><date><!--26
        November 2008--></date><bibliomisc><link
            xlink:href="https://www.w3.org/TR/xml/" xmlns:xlink="http://www.w3.org/1999/xlink"
           /></bibliomisc></bibliomixed>
    </bibliodiv>
  </bibliography>

</article>
